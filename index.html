<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDC Darts Betting Analyzer</title>
    <meta name="description" content="PDC darts fogadási stratégia elemzés - Underdog vs Favorit összehasonlítás">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Tailwind CSS with custom config -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        background: 'oklch(var(--background))',
                        foreground: 'oklch(var(--foreground))',
                        card: 'oklch(var(--card))',
                        'card-foreground': 'oklch(var(--card-foreground))',
                        primary: 'oklch(var(--primary))',
                        'primary-foreground': 'oklch(var(--primary-foreground))',
                        secondary: 'oklch(var(--secondary))',
                        'secondary-foreground': 'oklch(var(--secondary-foreground))',
                        muted: 'oklch(var(--muted))',
                        'muted-foreground': 'oklch(var(--muted-foreground))',
                        accent: 'oklch(var(--accent))',
                        'accent-foreground': 'oklch(var(--accent-foreground))',
                        destructive: 'oklch(var(--destructive))',
                        'destructive-foreground': 'oklch(var(--destructive-foreground))',
                        border: 'oklch(var(--border))',
                        input: 'oklch(var(--input))',
                        ring: 'oklch(var(--ring))',
                        chart1: 'oklch(var(--chart-1))',
                        chart2: 'oklch(var(--chart-2))',
                        chart3: 'oklch(var(--chart-3))',
                        chart4: 'oklch(var(--chart-4))',
                        chart5: 'oklch(var(--chart-5))',
                    },
                    borderRadius: {
                        lg: 'var(--radius)',
                        md: 'calc(var(--radius) - 2px)',
                        sm: 'calc(var(--radius) - 4px)',
                    }
                }
            }
        }
    </script>

    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="bg-[#1a1a1a] text-white min-h-screen p-4 md:p-8">

    <div class="max-w-6xl mx-auto space-y-8 animate-fade-in">

        <!-- Header Section -->
        <header class="text-center space-y-3">
            <h1
                class="text-4xl md:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-purple-400 via-blue-400 to-purple-400 bg-clip-text text-transparent">
                PDC Darts Betting Analyzer
            </h1>
        </header>

        <!-- Controls (Year & Round Selector inserted here to keep functionality) -->
        <div class="flex flex-col items-center justify-center gap-6">

            <!-- Year Selector -->
            <div class="bg-[#2a2a2a] p-3 rounded-2xl border border-gray-700/50 flex gap-3 shadow-lg">
                <button onclick="loadYear(2026)" id="year-2026"
                    class="year-btn px-8 py-3 rounded-xl font-bold text-lg bg-[#3a3a3a] hover:bg-[#4a4a4a] text-gray-300">
                    PDC 2026
                </button>
                <button onclick="loadYear(2025)" id="year-2025"
                    class="year-btn px-8 py-3 rounded-xl font-bold text-lg bg-[#3a3a3a] hover:bg-[#4a4a4a] text-gray-300">
                    PDC 2025
                </button>
            </div>

            <div
                class="bg-[#2a2a2a] border border-gray-700/50 rounded-lg py-2 px-6 text-sm text-gray-300 shadow-sm -mt-2">
                Tipp: Több fordulót is kijelölhetsz egyszerre
            </div>

            <!-- Round Selector (Dynamic) -->
            <div id="round-container" class="hidden w-full max-w-5xl animate-slide-down">
                <div id="round-selector" class="flex flex-wrap justify-center gap-3">
                    <!-- Buttons injected by JS (larger size defined in JS) -->
                </div>
            </div>

            <!-- Stake Input (From Design) -->
            <div class="max-w-md w-full mx-auto">
                <label for="stake"
                    class="block text-sm font-medium text-gray-300 mb-2 text-center uppercase tracking-wider">Tét
                    összege mérkőzésenként (HUF)</label>
                <input type="number" id="stake" value="1000" placeholder="Tét összege"
                    class="w-full text-center text-3xl h-16 bg-[#2a2a2a] border border-gray-700 focus:border-purple-500 rounded-xl px-4 transition-colors focus:outline-none text-white shadow-md font-bold"
                    min="0">
            </div>

        </div>

        <!-- Biggest Surprise Card -->
        <div id="surprise-card" class="hidden animate-slide-down max-w-2xl mx-auto">
            <div
                class="bg-gradient-to-r from-yellow-500/10 via-yellow-500/20 to-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 text-center">
                <div class="text-yellow-500 text-xs font-bold uppercase tracking-widest mb-1">A kiválasztott kör
                    legnagyobb meglepetése</div>
                <div id="surprise-content">
                    <!-- Dynamic content -->
                </div>
            </div>
        </div>



        <!-- Stats Comparison Cards (From Design) -->
        <div class="grid md:grid-cols-2 gap-8">

            <!-- Underdog Strategy Card -->
            <div
                class="strategy-card rounded-2xl bg-gradient-to-br from-purple-600/20 to-purple-800/20 border border-purple-500/30 overflow-hidden shadow-2xl">
                <div class="p-8 space-y-8">
                    <div class="flex items-center gap-4">
                        <h2 class="text-3xl font-bold text-gray-100">Underdog stratégia</h2>
                    </div>

                    <div class="space-y-6">
                        <!-- Win Rate -->
                        <div class="text-center p-6 bg-black/30 rounded-xl border border-white/5">
                            <p class="text-sm text-gray-400 mb-2 font-medium uppercase tracking-wide">Nyerési arány</p>
                            <p class="text-6xl font-black text-purple-400">
                                <span id="underdog-winrate">0</span>%
                            </p>
                        </div>

                        <!-- Wins/Losses -->
                        <div class="flex justify-between items-center p-5 bg-black/30 rounded-xl border border-white/5">
                            <div>
                                <p class="text-sm text-gray-400 mb-1">Nyertes</p>
                                <p class="text-3xl font-bold text-green-400" id="underdog-wins">0</p>
                            </div>
                            <div class="text-right">
                                <p class="text-sm text-gray-400 mb-1">Vesztes</p>
                                <p class="text-3xl font-bold text-red-400" id="underdog-losses">0</p>
                            </div>
                        </div>

                        <!-- Profit/Loss -->
                        <div class="text-center p-5 bg-black/30 rounded-xl border border-white/5">
                            <p class="text-sm text-gray-400 mb-2 font-medium uppercase tracking-wide">Összes
                                profit/veszteség</p>
                            <p class="text-4xl font-bold number-animate" id="underdog-profit">
                                +0 Ft
                            </p>
                        </div>

                        <!-- ROI -->
                        <div class="text-center p-6 bg-black/30 rounded-xl border-2 border-purple-500/50">
                            <p class="text-sm text-gray-400 mb-2 font-medium uppercase tracking-wide">Megtérülés (ROI)
                            </p>
                            <p class="text-5xl font-black number-animate" id="underdog-roi">
                                0%
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Favorite Strategy Card -->
            <div
                class="strategy-card rounded-2xl bg-gradient-to-br from-blue-600/20 to-blue-800/20 border border-blue-500/30 overflow-hidden shadow-2xl">
                <div class="p-8 space-y-8">
                    <div class="flex items-center gap-4">
                        <h2 class="text-3xl font-bold text-gray-100">Favorit stratégia</h2>
                    </div>

                    <div class="space-y-6">
                        <!-- Win Rate -->
                        <div class="text-center p-6 bg-black/30 rounded-xl border border-white/5">
                            <p class="text-sm text-gray-400 mb-2 font-medium uppercase tracking-wide">Nyerési arány</p>
                            <p class="text-6xl font-black text-blue-400">
                                <span id="favorite-winrate">0</span>%
                            </p>
                        </div>

                        <!-- Wins/Losses -->
                        <div class="flex justify-between items-center p-5 bg-black/30 rounded-xl border border-white/5">
                            <div>
                                <p class="text-sm text-gray-400 mb-1">Nyertes</p>
                                <p class="text-3xl font-bold text-green-400" id="favorite-wins">0</p>
                            </div>
                            <div class="text-right">
                                <p class="text-sm text-gray-400 mb-1">Vesztes</p>
                                <p class="text-3xl font-bold text-red-400" id="favorite-losses">0</p>
                            </div>
                        </div>

                        <!-- Profit/Loss -->
                        <div class="text-center p-5 bg-black/30 rounded-xl border border-white/5">
                            <p class="text-sm text-gray-400 mb-2 font-medium uppercase tracking-wide">Összes
                                profit/veszteség</p>
                            <p class="text-4xl font-bold number-animate" id="favorite-profit">
                                +0 Ft
                            </p>
                        </div>

                        <!-- ROI -->
                        <div class="text-center p-6 bg-black/30 rounded-xl border-2 border-blue-500/50">
                            <p class="text-sm text-gray-400 mb-2 font-medium uppercase tracking-wide">Megtérülés (ROI)
                            </p>
                            <p class="text-5xl font-black number-animate" id="favorite-roi">
                                0%
                            </p>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Chart Section -->
        <div class="bg-[#2a2a2a] border border-gray-700/50 rounded-2xl p-6 shadow-xl animate-fade-in mb-12">
            <h3 class="text-2xl font-bold text-gray-200 mb-6 flex items-center justify-between gap-3">
                <div class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-purple-400" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z" />
                    </svg>
                    Egyenleg alakulása
                </div>

                <!-- Fullscreen Button (Visible on mobile) -->
                <button onclick="toggleChartFullscreen()"
                    class="md:hidden text-gray-400 hover:text-white p-2 bg-black/20 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
                    </svg>
                </button>
            </h3>

            <!-- Rotation Overlay (Hidden by default) -->
            <div id="rotation-overlay"
                class="fixed inset-0 bg-[#1a1a1a] z-[100] hidden flex-col items-center justify-center text-center p-8 landscape:hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24 text-purple-500 mb-6 animate-pulse" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                </svg>
                <h3 class="text-2xl font-bold text-white mb-2">Fordítsd el a készüléket!</h3>
                <p class="text-gray-400">A teljes képernyős nézet csak fekvő módban érhető el.</p>
                <button onclick="toggleChartFullscreen()"
                    class="mt-8 px-6 py-2 border border-gray-600 rounded-lg text-gray-400 hover:text-white">Bezárás</button>
            </div>

            <!-- Chart Tip -->
            <div
                class="bg-[#2a2a2a] border border-gray-700/50 rounded-lg py-2 px-4 text-sm text-gray-400 shadow-sm mb-4 inline-block">
                Tipp: Kattints a lenti színes körökre a stratégiák ki/bekapcsolásához!
            </div>
            <div class="relative h-[400px] w-full group/chart">
                <canvas id="balanceChart"></canvas>

                <!-- Navigation Arrows (Visible in Fullscreen) -->
                <button id="chart-prev" onclick="stepChart(-1)"
                    class="hidden absolute left-4 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-md border border-white/10 text-white p-4 rounded-full transition-all active:scale-95 z-50">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>
                <button id="chart-next" onclick="stepChart(1)"
                    class="hidden absolute right-4 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-md border border-white/10 text-white p-4 rounded-full transition-all active:scale-95 z-50">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-sm text-gray-500 pt-12 pb-8">
            <p id="footer-info">Adatok betöltése...</p>
        </footer>

        <!-- Loading State -->
        <div id="loading"
            class="fixed inset-0 bg-black/80 flex items-center justify-center backdrop-blur-sm z-50 hidden">
            <div class="text-center">
                <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500 mb-4 mx-auto">
                </div>
                <p class="text-purple-200 font-bold animate-pulse">Adatok elemzése...</p>
            </div>
        </div>

        <!-- Error State -->
        <div id="error" class="fixed inset-0 bg-black/90 flex items-center justify-center backdrop-blur-sm z-50 hidden">
            <div class="bg-red-900/20 border border-red-500/50 p-8 rounded-2xl max-w-md text-center">
                <div class="text-5xl mb-4">⚠️</div>
                <h3 class="text-xl font-bold text-red-400 mb-2">Hiba</h3>
                <p id="error-message" class="text-red-200">Az adatok betöltése sikertelen.</p>
                <button onclick="location.reload()"
                    class="mt-6 px-6 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg font-bold transition-colors">
                    Újrapóbálkozás
                </button>
            </div>
        </div>

    </div>

    <!-- Welcome Modal -->
    <div id="welcome-modal"
        class="fixed inset-0 bg-black/90 flex items-center justify-center backdrop-blur-sm z-[60] hidden">
        <div
            class="bg-[#2a2a2a] border border-gray-700/50 p-6 md:p-8 rounded-2xl max-w-lg w-full mx-4 shadow-2xl relative animate-slide-up transform transition-all">
            <button onclick="closeWelcomeModal()"
                class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2
                class="text-2xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent">
                Üdvözöllek!</h2>
            <div class="space-y-4 text-gray-300 leading-relaxed">
                <p>
                    Ez az oldal azt vizsgálja, hogy a <strong>PDC Darts</strong> mérkőzéseken melyik fogadási stratégia
                    lenne nyereségesebb hosszú távon.
                </p>
                <div class="bg-black/30 p-4 rounded-xl border border-white/5 space-y-3">
                    <div class="flex items-start gap-3">
                        <div class="w-2 h-2 rounded-full bg-purple-400 mt-2 shrink-0"></div>
                        <div>
                            <strong class="text-purple-400">Underdog stratégia:</strong><br>
                            Mindig a magasabb szorzójú (esélytelenebb) játékosra teszünk.
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <div class="w-2 h-2 rounded-full bg-blue-400 mt-2 shrink-0"></div>
                        <div>
                            <strong class="text-blue-400">Favorit stratégia:</strong><br>
                            Mindig az alacsonyabb szorzójú (esélyesebb) játékosra teszünk.
                        </div>
                    </div>
                </div>
                <p class="text-sm text-gray-400 italic">
                    A rendszer valós oddsok alapján számolja a profitot és a megtérülést (ROI).
                </p>
            </div>
            <button onclick="closeWelcomeModal()"
                class="mt-6 w-full py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-purple-500/25">
                Rendben, értem!
            </button>
        </div>
    </div>

    <!-- Correct JS Path -->
    <script src="js/chart.js"></script>
    <script src="js/script.js"></script>
</body>

</html>